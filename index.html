<!DOCTYPE html>
<html>
  <head>
    <link rel='shortcut icon' href='favicon.ico' type='image/x-icon'/ >
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Passion+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Arbutus" rel="stylesheet">
    <title>PuzzleAppCademy</title>
    <link rel="stylesheet" type="text/css" href="./css/main.css">
  </head>

  <body>
    <div id="title"><h1 id="puzzle">PUZZLE</h1> <h1 id="and">APP</h1> <h1 id="dragons">CADEMY</h1></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="./kinetic-v5.1.0.js"> </script>
    <script src="./js/bundle.js"></script>
    <div id="game group">
      <div id="game-board" onclick="beginGame()">
        <div id="game-play">
        </div>
        <div id="game-bg">
          <canvas id="board" height="424" width="624"></canvas>
        </div>
      </div>
      <div id="game-sidebar group">
        <div id="instructions">
          <h2>How to play</h2>
          <p id="rule">∞ Click on an orb on the board to hold it</p>
          <p id="rule">∞ Move the orb around the board to swap with other orbs</p>
          <p id="rule">∞ Match 3 or more of the same type horizontally and/or vertically</p>
          <p id="rule">∞ The more you match at once, the higher your score</p>
          <p id="rule">∞ You have 2 minutes per round. Good luck!</p>
        </div>
        <div id="score-timer">
          <p id="stat">Score:</p>
          <div id="score">
            <span class="score"></span>
          </div>
          <p id="stat">Time:</p>
          <div id="timer">
            <span class="seconds"></span>
          </div>
          <div id="reset">
            <a id="reset-butt" href="./index.html">Reset</a>
            <!-- <button type="button" id="reset" onclick="resetGame()">Reset</button> -->
            <button type="button" id="reset-butt" onclick="muteSound()">Mute</button>
          </div>
        </div>
        </div>
      </div>
    </div>
    <script>
      window.onload = function () {
        let timer = document.getElementById('timer');
        let secondsSpan = timer.querySelector('.seconds');
        secondsSpan.innerHTML = (120);
      }
      function beginGame() {
        if (!window.gameStarted) {
          window.gameStarted = true;
          let countdown = 121;
          gameStart('timer', countdown);
        }
      }

      function gameStart(id, countdown) {
        this.countdown = countdown;
        let timer = document.getElementById(id);
        let secondsSpan = timer.querySelector('.seconds');

        function updateClock() {
          if (!window.gameEnd){
            countdown -= 1;
            secondsSpan.innerHTML = (countdown);
            if (countdown <= 0) {
              window.gameEnd = true;
            }
          }
        }
        if (!window.gameEnd){
          updateClock();
          let timing = setInterval(updateClock, 1000);
        }
      }

      function resetGame() {
        let score = document.getElementById('score');
        let scoreSpan = score.querySelector('.score');
        scoreSpan.innerHTML = 0;

        let timer = document.getElementById('timer');
        let secondsSpan = timer.querySelector('.seconds');
        secondsSpan.innerHTML = (120);

        window.gameStarted = false;
        window.gameEnd = false;
      }

      function muteSound () {
        window.mute = !window.mute;
        if (window.mute === true) {
          window.song.volume = 0;
        } else {
          window.song.volume = 0.5;
        }
      };
    </script>
  </body>
</html>
